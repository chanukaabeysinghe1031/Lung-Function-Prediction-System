<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lung Function Prediction System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">


</head>
<body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                {% if session['firstName'] %}
                    <li class="nav-item active">
                        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/logout">Logout</a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/register">Register</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <div id="wrapper">
        <div id="page-wrapper">
            <div id="row">
                <div id="card" style="margin-top: 50px" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h2>
                                Welcome
                                {% if session['firstName'] %}
                                    Doctor {{ session['firstName'] }} {{ session['secondName'] }}
                                {% else %}
                                    Not login yet
                                {% endif %}
                            </h2>
                            <div class="panel-title"></div>
                         </div>
                        <div class="panel-body">
                            <p>
                                {% with messages = get_flashed_messages() %}
                                    {% if messages %}
                                        {% for message in messages %}
                                            <div class="alert alert-success">
                                                <strong>{{ message }}</strong>
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                {% endwith %}
                            </p>
                            <div class="row">
                                <p style="padding: 8px;">Please select the 10 CT images which are needed to predict FVC(Only select Dicom images)</p>
                            </div>
                            <div class="row" style="padding:10px 15px 9px;">
                                <form method="POST" action="/" enctype="multipart/form-data">
                                    <div class="form-group">
                                        <div class="row" style="margin-bottom:20px;">
                                            <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12 col-md-offset-3 col-sm-offset-3 col-xs-offset-2">
                                                <input type="file" name="CT-images[]" multiple="true" onautocomplete="off" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="week_number">Week Number</label>
                                            <input type="number"  min="0" step="0" class="form-control" id="week_number" placeholder="Week Number" name="week_number" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="age">Age</label>
                                            <input type="number" min="1" step="1" class="form-control" id="age" placeholder="Age" name="age" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="percentage">Percentage</label>
                                            <input type="number" min="1" step="1" max="100" class="form-control" id="percentage" placeholder="Percentage" name="percentage" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <legend class="col-form-label">Gender</legend>

                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="gender" id="male" value="male" required >
                                                <label class="form-check-label" for="male">Male</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="gender" id="female" value="female" required>
                                                <label class="form-check-label" for="frmale">Female</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <legend class="col-form-label ">Smoking Status</legend>

                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="smoking_status" id="smoker" value="smoker" required>
                                                <label class="form-check-label" for="smoker">Currently Smoking</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="smoking_status" id="ex_smoker" value="ex_smoker" required>
                                                <label class="form-check-label" for="stopped_smoker">Stopped Smoking</label>
                                            </div>
                                            <div class="form-check disabled">
                                                <input class="form-check-input" type="radio" name="smoking_status" id="never_smoked" value="never_smoker" required >
                                                <label class="form-check-label" for="nerver_smoked">Nerver Smoked</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row text-center" style="padding-left: 20px;padding-right: 20px;">
                                        <input type="submit" value="submit" class="btn btn-lg btn-block btn-success" style="border-radius: 50px;background-color:hover:#35832F"
                                    </div>
                                </form>
                            </div>
                        </div>

                         <div class="panel-footer">
                            <h2>
                               Prediction :{{ prediction}}
                            </h2>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    <canvas id="ct_images" width="50" height="50" style="border:1px solid #0000";>

    </canvas>
    </div>

{#    <div class="container main-body">#}
{#    <!--This is the login page-->#}
{##}
{#    <form method=post enctype=multipart/form-data action="/predict">#}
{#        <input type=file name=image>#}
{#        <input type=submit value=predict>#}
{#        <h3>Prediction :{{ prediction}}</h3>#}
{#    </form>#}
{##}
{##}
{#</div>#}

    <script>
        var  ctx =document.getElementById('ct_images').getContext('2d');
        var imageData = [
	[[255,0,0], [255,0,0], [255,0,0], [255,0,0], [255,0,0]],
  [[0,255,0], [0,255,0], [0,255,0], [0,255,0], [0,255,0]],
  [[255,0,0], [255,0,0], [255,0,0], [255,0,0], [255,0,0]],
  [[0,255,0], [0,255,0], [0,255,0], [0,255,0], [0,255,0]],
  [[255,0,0], [255,0,0], [255,0,0], [255,0,0], [255,0,0]],
];

        for(var y = 0; y < imageData.length; y++) {
            for (var x = 0; x < imageData[y].length; x++) {
                ctx.fillStyle = `rgb(${imageData[y][x][0]}, ${imageData[y][x][1]}, ${imageData[y][x][2]})`;
                ctx.fillRect(x, y, 1, 1);
            }
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</body>
</html>